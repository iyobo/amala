"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[380],{6042:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var n=o(5893),r=o(1151);const a={sidebar_position:1,sidebar_label:"bootstrapControllers"},s="bootstrapControllers(options)",i={id:"api-spec/bootstrap-controllers",title:"bootstrapControllers(options)",description:"Call this in your main file to initialize your controllers.",source:"@site/docs/api-spec/bootstrap-controllers.md",sourceDirName:"api-spec",slug:"/api-spec/bootstrap-controllers",permalink:"/docs/api-spec/bootstrap-controllers",draft:!1,unlisted:!1,editUrl:"https://github.com/iyobo/amala/tree/master/docs/docs/api-spec/bootstrap-controllers.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"bootstrapControllers"},sidebar:"tutorialSidebar",previous:{title:"API Spec",permalink:"/docs/category/api-spec"},next:{title:"Decorators",permalink:"/docs/api-spec/decorators"}},l={},p=[{value:"Returns",id:"returns",level:4}];function c(e){const t={code:"code",h1:"h1",h4:"h4",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"bootstrapcontrollersoptions",children:"bootstrapControllers(options)"}),"\n",(0,n.jsx)(t.p,{children:"Call this in your main file to initialize your controllers."}),"\n",(0,n.jsx)(t.h4,{id:"returns",children:"Returns"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"Promise<{ app: Application; router: Router }>"}),"\nReturns a promise of the koa app, and the router used in the bootstrap function."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'\n// bootstrap options\n\nexport interface AmalaOptions {\n  // For If you want to supply your own koa application instance.\n  // If this is not provided, amala will create a koa application for you.\n  // Either way, an app is returned from the bootstrap function.\n  app?: Application;\n\n  // For if you want to supply your own Koa-Router instance.\n  // If this is not provided, amala will create a koa-router for you and load it up with endpoints\n  // Either way, a router is returned from the bootstrap function.\n  // The router is not attached by default to the app. If you want that, be sure to set options.attachRoutes to true.\n  router?: any;\n\n  // An array used to register all controllers to be routed. Can take Classes or glob path strings of where the classes exist.\n  // It is recommended to statically register each controller Classes here instead of using path strings.\n  controllers: Array<string | Function>;\n\n  // Your base API path. default:  "/api"\n  basePath?: string;\n\n  // The versions you want to actively run for your API.\n  // Default is [1] which means /api/v1/*. See docs for details.\n  versions?: Array<number | string> | { [key: string]: string | boolean };\n\n  // default: false. Set this to true to disable versioning. E.g /api/v1/* becomes /api/*\n  disableVersioning?: boolean;\n\n  // Define the sequence of middleware to per request.\n  flow?: Array<(ctx, next) => Promise<void>>;\n\n  /*\n   Amala simplifies error handling for you using Boom errors.\n   You can throw boom errors from within your endpoints and middleware and the will be nicely handled and\n   sent back to the requester based on status code.\n\n   If you must change this, be sure to reference the default implementation for context. See below:\n\n   \n    const defaultErrorHandler = async (err: any, ctx: any) => {\n      if (err.isBoom) {\n        const error = err.output.payload;\n        error.errorDetails = error.statusCode >= 500 ? undefined : err.data;\n        ctx.body = error;\n        ctx.status = error.statusCode;\n        if (error.statusCode >= 500) console.error(err);\n      } else {\n        ctx.body = {error: \'Internal Server Error\'};\n        ctx.status = 500;\n        console.error(err);\n      }\n    };\n   \n   */\n  errorHandler?: (err, ctx) => Promise<void>;\n\n  // if true, will attach generated routes to the koa app. Don\'t set to true if you need to use app.use(...)\n  attachRoutes?: boolean;\n\n  // Options for class-validator. Used to validate endpoint injectables. See docs.\n  validatorOptions?: ValidatorOptions;\n\n  \n  openAPI?: {\n    enabled: boolean;\n    /**\n     * URL path to serve openAPi spec. Default: "/api/docs"\n     */\n    specPath?: string,\n\n    /**\n     * URL path to serve openAPi UI. Default: "/api/swagger"\n     */\n    webPath?: string,\n\n    /**\n     * What is the public URL for this API?\n     */\n    publicURL: string,\n\n    /**\n     * Use this to Pre-fill certain aspects of the OpenAPI spec e.g to define "info" segment.\n     */\n    spec?: Partial<{\n      info: Partial<OpenAPIV3_1.InfoObject>;\n      servers?: OpenAPIV3_1.ServerObject[];\n      paths: Partial<OpenAPIV3_1.PathsObject>;\n      components?: Partial<OpenAPIV3_1.ComponentsObject>;\n      security?: Partial<OpenAPIV3_1.SecurityRequirementObject>[];\n      tags?: Partial<OpenAPIV3_1.TagObject[]>;\n      externalDocs?: Partial<OpenAPIV3_1.ExternalDocumentationObject>;\n    }>\n  };\n\n\n  // body parser options. See https://www.npmjs.com/package/koa-body#options\n  // Set to false to prevent amala from attaching koa-body middleware to all endpoints.\n  // Useful if you prefer to use something else for body parsing in your koa app or to disable it altogether.\n  bodyParser?: false | KoaBodyOptions;\n}\n\n'})})]})}function d(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},1151:(e,t,o)=>{o.d(t,{Z:()=>i,a:()=>s});var n=o(7294);const r={},a=n.createContext(r);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);